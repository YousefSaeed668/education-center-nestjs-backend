enum CourseType {
  حصة
  شهرى
  سنوى
}

model Course {
  id             Int             @id @default(autoincrement())
  courseName     String
  description    String?
  courseType     CourseType
  thumbnail      String
  price          Int
  teacherId      Int
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  grade          Grade           @relation(fields: [gradeId], references: [id])
  gradeId        Int
  Teacher        Teacher         @relation(fields: [teacherId], references: [id], onDelete: Cascade)
  CourseLecture  CourseLecture[]
  Division       Division?       @relation(fields: [divisionId], references: [id])
  divisionId     Int?
  courseFeatures String[]
}

model CourseLecture {
  id         Int @id @default(autoincrement())
  courseId   Int
  lectureId  Int
  orderIndex Int

  course  Course  @relation(fields: [courseId], references: [id])
  lecture Lecture @relation(fields: [lectureId], references: [id])

  @@unique([courseId, lectureId])
}

model Lecture {
  id             Int              @id @default(autoincrement())
  lectureName    String
  LectureContent LectureContent[]
  CourseLecture  CourseLecture[]
  Grade          Grade?           @relation(fields: [gradeId], references: [id])
  gradeId        Int?
  Division       Division?        @relation(fields: [divisionId], references: [id])
  divisionId     Int?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  teacherId      Int
  Teacher        Teacher          @relation(fields: [teacherId], references: [id], onDelete: Cascade)
}

model LectureContent {
  id          Int         @id @default(autoincrement())
  lectureId   Int
  lecture     Lecture     @relation(fields: [lectureId], references: [id], onDelete: Cascade)
  contentType ContentType
  contentUrl  String
  duration    Int?
  createdAt   DateTime    @default(now())
  contentName String
  orderIndex  Int
}

enum ContentType {
  VIDEO
  FILE
}
